<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>jQuery UI Droppable - Shopping to_do_list Demo</title>
  <link rel="stylesheet" href="jquery-ui.css">
  <script src="jquery-1.11.0.js"></script>
  <script src="jquery-ui.js"></script>

  <!--Bootstrap-->
    <link rel="stylesheet" href="css/bootstrap.css">
      <link rel="stylesheet" href="css/bootstrap-theme.css">
  <script src="js/bootstrap.js"></script>

  <style>
  h1 { padding: .2em; margin: 0; }
  #chat { float:left; width: 40%; margin-right: 2em; }

  #to_do_list { width: 50%; float: left; margin-top: 1em; }
  /* style the list to maximize the droppable hitarea */
  #to_do_list ol { margin: 0; padding: 1em 0 1em 3em; }

  textarea { width: 100%;}
  </style>

  <script>
  $(function() {
    // $( "#chat li" ).draggable(
    //   { revert: "valid" }
    // );

    $( "#to_do_list ol" ).droppable({
      activeClass: "ui-state-default",
      hoverClass: "ui-state-hover",
      accept: ":not(.ui-sortable-helper)",
      drop: function( event, ui ) {
        $( this ).find( ".placeholder" ).remove();
        $( "<li></li>" ).text( ui.draggable.text() )
                        .appendTo( this )
                        .dblclick(function(){
                                    // open modal
                                    $('#myModal').modal()
                                    // get the content of the current list item
                                    $current_item = $(this)
                                    $('.modal-body textarea').val($current_item.text())
                                    // if  click save button..
                                    $('.modal-footer .save-btn').click(function(){

                                      $current_item.text($('.modal-body textarea').val())
                                    })
                                  })
      }
    }).sortable({
      items: "li:not(.placeholder)",
      sort: function() {
        // gets added unintentionally by droppable interacting with sortable
        // using connectWithSortable fixes this, but doesn't allow you to customize active/hoverClass options
        $( this ).removeClass( "ui-state-default" );
      }
    });
  });


  
  var id, cnt = 0;

  $(function(){
    
    id = setInterval(function(){
      $('<li></li>').text(cnt + ' bula bula').appendTo('#chat').draggable({ revert: true, helper: "clone" });
      cnt ++

      if (cnt > 10) 
        clearInterval(id)
       
    }, 1000)

  })


   /*
    리스트 더블클릭하면 수정할 수 있게.
  */
  </script>
  
</head>
<body>
 <!--div 영역이 너무 큼.  bootstrap content로 감싸주고? -->
<div id="chat">
  <h1>Let chat!</h1>
</div>
 
<div id="to_do_list">
  <h1 class="ui-widget-header">To-do-List</h1>
  <div class="ui-widget-content">
    <ol>
      <li class="placeholder">Add your items here</li>
    </ol>
  </div>
</div>



<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h4 class="modal-title">Modify To-do-list item</h4>
      </div>
      <div class="modal-body">
        <!--텍스트 필드 넣고.. 이전 내용 여기에 써야함.  '.modal-body textarea' 에쓰면 될듯-->
        <textarea></textarea>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary save-btn" data-dismiss="modal">Save changes</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->
 
 
</body>
</html>